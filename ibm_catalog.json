{
  "products": [
    {
      "name": "deploy-arch-ibm-cos",
      "label": "Cloud automation for Object Storage",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "storage",
        "converged_infra"
      ],
      "keywords": [
        "terraform",
        "cos",
        "object storage",
        "bucket",
        "storage",
        "solution",
        "IaC",
        "infrastructure as code"
      ],
      "short_description": "Creates and configures an IBM Cloud Object Storage instance and buckets",
      "long_description": "IBM Cloud Object Storage is a highly available, durable, and secure platform for storing unstructured data. This deployable architecture is used to provision and configure [IBM Cloud Object Storage](https://cloud.ibm.com/docs/cloud-object-storage) resources. It consists of a `Single instance` variation which can be used to provision and configure the instance, and then other variations for provisioning and configuring regional and cross regional buckets.\n\nℹ️ This Terraform-based automation is part of a broader suite of IBM-maintained Infrastructure as Code (IaC) asset collection, each following the naming pattern \"Cloud automation for *servicename*\" and focusing on single IBM Cloud service. These single-service deployable architectures can be used on their own to streamline and automate service deployments through an [IaC approach](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-understanding-projects), or assembled together into a broader [automated IaC stack](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-config-stack) to automate the deployment of an end-to-end solution architecture.",
      "support_details": "This product is in the community registry, as such support is handled through the originated repo. If you experience issues please open an issue in this repository [here](https://github.com/terraform-ibm-modules/terraform-ibm-cos/issues). Please note this product is not supported via the IBM Cloud Support Center.",
      "offering_docs_url": "https://github.com/terraform-ibm-modules/terraform-ibm-cos/blob/main/README.md",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-cos/main/images/cos_icon.svg",
      "provider_name": "IBM",
      "features": [
        {
          "title": "Object Storage instance",
          "description": "Create and configures an IBM Cloud Object Storage instance."
        },
        {
          "title": "Object Storage bucket",
          "description": "Supports both cross-regional and regional bucket creation and configuration."
        },
        {
          "title": "KMS encryption",
          "description": "You can optionally choose to encrypt your data using the default encryption keys, or opt for IBM Key Protect or IBM Hyper Protect Crypto Services to have complete control over the encryption keys. [Learn more](https://cloud.ibm.com/docs/cloud-object-storage?topic=cloud-object-storage-encryption)."
        },
        {
          "title": "Service credentials",
          "description": "Has the ability to create and configure Object Storage service credentials for your instance. Optionally choose to configure  [IBM Cloud Secrets Manager](https://cloud.ibm.com/docs/secrets-manager?topic=secrets-manager-service-credentials&interface=terraform) to manage the service credentials. "
        },
        {
          "title": "Context-based restrictions",
          "description": "Optionally create and configure [Context-based restrictions (CBR)](https://cloud.ibm.com/docs/account?topic=account-context-restrictions-whatis) for both instance and buckets."
        }
      ],
      "flavors": [
        {
          "label": "Single instance (fully configurable)",
          "name": "instance",
          "index": 1,
          "install_type": "fullstack",
          "working_directory": "solutions/instance",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "IBM Cloud Framework for Financial Services",
                "profile_version": "1.7.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "cloud-object-storage",
              "notes": "Required to create Cloud Object Storage (COS) Instance."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Administrator"
              ],
              "service_name": "iam-identity",
              "notes": "[Optional] Required if Cloud automation for account configuration is enabled."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configured to use IBM secure by default standards, but can be edited to fit your use case."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Object Storage - Single instance (fully configurable)",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-cos/main/reference-architectures/instance.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture automates the provisioning and configuration of an <b>IBM Cloud Object Storage (COS) instance</b> within an existing resource group, integration with <b>IBM Secrets Manager</b> for secure credential storage, IAM authorization policies, and enforcement of <b>Context-Based Restrictions (CBR)</b> for enhanced security and compliance."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "prefix"
            },
            {
              "key": "plan",
              "required": true,
              "options": [
                {
                  "displayname": "Standard",
                  "value": "standard"
                },
                {
                  "displayname": "One Rate",
                  "value": "cos-one-rate-plan"
                }
              ]
            },
            {
              "key": "existing_resource_group_name",
              "display_name": "resource_group",
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_name"
                }
              }
            },
            {
              "key": "instance_name"
            },
            {
              "key": "resource_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "access_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "resource_keys"
            },
            {
              "key": "service_credential_secrets"
            },
            {
              "key": "existing_secrets_manager_instance_crn"
            },
            {
              "key": "existing_secrets_manager_endpoint_type",
              "hidden":true,
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                }
              ]
            },
            {
              "key": "skip_secrets_manager_cos_iam_auth_policy"
            },
            {
              "key": "cos_instance_cbr_rules"
            },
            {
              "key": "provider_visibility",
              "hidden":true,
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                },
                {
                  "displayname": "public-and-private",
                  "value": "public-and-private"
                }
              ]
            }
          ],
          "dependencies": [
            {
              "name": "deploy-arch-ibm-account-infra-base",
              "description": "Cloud automation for Account Configuration organizes your IBM Cloud account with a ready-made set of resource groups by default—and, when you enable the \"with Account Settings\" option, it also applies baseline security and governance settings.",
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "flavors": [
                "resource-group-only",
                "resource-groups-with-account-settings"
              ],
              "default_flavor": "resource-group-only",
              "id": "63641cec-6093-4b4f-b7b0-98d2f4185cd6-global",
              "input_mapping": [
                {
                  "dependency_output": "workload_resource_group_name",
                  "version_input": "existing_resource_group_name"
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "provider_visibility",
                  "version_input": "provider_visibility",
                  "reference_version": true
                }
              ],
              "optional": true,
              "on_by_default": false,
              "version": "v3.0.7"
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.10.5"
        },
        {
          "label": "Cross-regional bucket (fully configurable)",
          "name": "cross-regional-bucket-fully-configurable",
          "index": 2,
          "working_directory": "solutions/cross-regional-bucket/fully-configurable",
          "install_type": "fullstack",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "IBM Cloud Framework for Financial Services",
                "profile_version": "1.7.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "cloud-object-storage",
              "notes": "Required to create Cloud Object Storage (COS) Instance."
            },
            {
              "service_name": "kms",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "notes": "[Optional] Required if KMS encryption is enabled and Key protect is used for bucket encryption."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "hs-crypto",
              "notes": "[Optional] Required if KMS encryption is enabled and IBM Hyper Protect Crypto Services is used to encrypt the root key for bucket encryption."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "sysdig-monitor",
              "notes": "[Optional] Required for creating a new instance of cloud monitoring."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "metrics-router",
              "notes": "[Optional] Required if metrics routing to cloud monitoring instance is enabled."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configured to use IBM secure by default standards, but can be edited to fit your use case."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Cross-regional Object Storage Bucket Topology",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-cos/main/reference-architectures/cross-regional-bucket.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture deploys a <b> Cross-regional IBM Cloud Object Storage Bucket</b> across multiple regions, with <b>replication</b> ensuring high availability and durability.<br> Integrated services such as <b>KMS</b> for encryption enhance security, while <b>Activity Tracker Event Routing</b> and <b>Cloud Monitoring</b> offer observability, ensuring resilient and secure cloud storage."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "prefix",
              "required": true
            },
            {
              "key": "cross_region_location",
              "required": true,
              "options": [
                {
                  "displayname": "United States Geo (us-geo)",
                  "value": "us"
                },
                {
                  "displayname": "Asia Pacific Geo (ap-geo)",
                  "value": "ap"
                },
                {
                  "displayname": "Europe Geo (eu-geo)",
                  "value": "eu"
                }
              ]
            },
            {
              "key": "existing_cos_instance_crn",
              "required": true
            },
            {
              "key": "bucket_name",
              "required": true
            },
            {
              "key": "provider_visibility",
              "hidden": true,
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                },
                {
                  "displayname": "public-and-private",
                  "value": "public-and-private"
                }
              ]
            },
            {
              "key": "add_bucket_name_suffix"
            },
            {
              "key": "archive_filter_prefix"
            },
            {
              "key": "bucket_access_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "bucket_storage_class",
              "options": [
                {
                  "displayname": "standard",
                  "value": "standard"
                },
                {
                  "displayname": "vault",
                  "value": "vault"
                },
                {
                  "displayname": "cold",
                  "value": "cold"
                },
                {
                  "displayname": "smart",
                  "value": "smart"
                },
                {
                  "displayname": "onerate_active",
                  "value": "onerate_active"
                }
              ]
            },
            {
              "key": "expire_days"
            },
            {
              "key": "expire_filter_prefix"
            },
            {
              "key": "force_delete"
            },
            {
              "key": "bucket_hard_quota"
            },
            {
              "key": "management_endpoint_type_for_bucket",
              "hidden": true,
              "options": [
                {
                  "displayname": "direct",
                  "value": "direct"
                },
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                }
              ]
            },
            {
              "key": "monitoring_crn"
            },
            {
              "key": "enable_platform_metrics",
              "type": "string",
              "default_value": "true",
              "description": "When set to `true`, the IBM Cloud Monitoring instance will be configured to collect platform metrics from the provided region. ⚠️ You can configure 1 instance only of the IBM Cloud Monitoring service per region to collect platform metrics in that location. Check with the account or service administrator if another monitoring instance has already been configured. You may not have permissions to see all monitoring instances in the region. [Learn more](https://cloud.ibm.com/docs/monitoring?topic=monitoring-platform_metrics_enabling).",
              "required": true,
              "virtual": true,
              "options": [
                {
                  "displayname": "true",
                  "value": "true"
                },
                {
                  "displayname": "false",
                  "value": "false"
                }
              ]
            },
            {
              "key": "enable_object_locking"
            },
            {
              "key": "object_lock_duration_days"
            },
            {
              "key": "object_lock_duration_years"
            },
            {
              "key": "enable_object_versioning"
            },
            {
              "key": "enable_retention"
            },
            {
              "key": "enable_permanent_retention"
            },
            {
              "key": "default_retention_days"
            },
            {
              "key": "minimum_retention_days"
            },
            {
              "key": "maximum_retention_days"
            },
            {
              "key": "enable_noncurrent_expire"
            },
            {
              "key": "noncurrent_expire_days"
            },
            {
              "key": "noncurrent_expire_filter_prefix"
            },
            {
              "key": "enable_abort_multipart"
            },
            {
              "key": "abort_multipart_days"
            },
            {
              "key": "abort_multipart_filter_prefix"
            },
            {
              "key": "enable_replication"
            },
            {
              "key": "replication_rule_id"
            },
            {
              "key": "replication_prefix"
            },
            {
              "key": "replication_priority"
            },
            {
              "key": "replication_destination_bucket_name"
            },
            {
              "key": "ibmcloud_kms_api_key"
            },
            {
              "key": "kms_encryption_enabled"
            },
            {
              "key": "existing_kms_instance_crn"
            },
            {
              "key": "existing_kms_key_crn"
            },
            {
              "key": "cos_key_ring_name"
            },
            {
              "key": "cos_key_name"
            },
            {
              "key": "kms_endpoint_type",
              "hidden": true,
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                }
              ]
            },
            {
              "key": "skip_cos_kms_iam_auth_policy"
            },
            {
              "key": "cos_bucket_cbr_rules",
              "type": "array",
              "custom_config": {
                "type": "textarea",
                "grouping": "deployment",
                "original_grouping": "deployment"
              }
            }
          ],
          "dependencies": [
            {
              "name": "deploy-arch-ibm-cos",
              "description": "Enable to create a Cloud Object Storage (COS) instance, where an object storage bucket can be provisioned.",
              "id": "68921490-2778-4930-ac6d-bae7be6cd958-global",
              "version": "v9.0.2",
              "flavors": [
                "instance"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "cos_instance_crn",
                  "version_input": "existing_cos_instance_crn"
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                }
              ]
            },
            {
              "name": "deploy-arch-ibm-kms",
              "id": "2cad4789-fa90-4886-9c9e-857081c273ee-global",
              "description": "Enable Cloud automation for Key Protect to use your own managed encryption keys. If disabled, IBM Cloud's default service-managed encryption is used.",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "input_mapping": [
                {
                  "dependency_output": "kms_instance_crn",
                  "version_input": "existing_kms_instance_crn"
                },
                {
                  "version_input": "kms_encryption_enabled",
                  "value": true
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                }
              ],
              "optional": true,
              "on_by_default": true,
              "version": "v5.1.4"
            },
            {
              "name": "deploy-arch-ibm-cloud-monitoring",
              "description": "Enable IBM Cloud Monitoring to gain operational visibility into your cloud storage buckets. ",
              "id": "73debdbf-894f-4c14-81c7-5ece3a70b67d-global",
              "version": "v1.2.14",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "cloud_monitoring_crn",
                  "version_input": "monitoring_crn"
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "enable_platform_metrics",
                  "version_input": "enable_platform_metrics",
                  "reference_version": true
                }
              ]
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.10.5"
        },
        {
          "label": "Cross-regional bucket (security-enforced)",
          "name": "cross-regional-bucket-security-enforced",
          "index": 3,
          "working_directory": "solutions/cross-regional-bucket/security-enforced",
          "install_type": "fullstack",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "IBM Cloud Framework for Financial Services",
                "profile_version": "1.7.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "cloud-object-storage",
              "notes": "Required to create Cloud Object Storage (COS) Instance."
            },
            {
              "service_name": "kms",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "notes": "[Optional] Required if creating a new Key Protect root key for bucket encryption."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "hs-crypto",
              "notes": "[Optional] Required if creating a new Hyper Protect Crypto Services root key for bucket encryption."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configured to use IBM secure by default standards that can't be changed."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Cross-regional Object Storage Bucket Topology",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-cos/main/reference-architectures/cross-regional-bucket.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture deploys a <b> Cross-regional IBM Cloud Object Storage Bucket</b> across multiple regions, with <b>replication</b> ensuring high availability and durability.<br> Integrated services such as <b>KMS</b> for encryption enhance security, while <b>Activity Tracker Event Routing</b> and <b>Cloud Monitoring</b> offer observability, ensuring resilient and secure cloud storage."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "prefix",
              "required": true
            },
            {
              "key": "cross_region_location",
              "required": true,
              "options": [
                {
                  "displayname": "United States Geo (us-geo)",
                  "value": "us"
                },
                {
                  "displayname": "Asia Pacific Geo (ap-geo)",
                  "value": "ap"
                },
                {
                  "displayname": "Europe Geo (eu-geo)",
                  "value": "eu"
                }
              ]
            },
            {
              "key": "existing_cos_instance_crn",
              "required": true
            },
            {
              "key": "bucket_name",
              "required": true
            },
            {
              "key": "add_bucket_name_suffix"
            },
            {
              "key": "archive_filter_prefix"
            },
            {
              "key": "bucket_access_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "bucket_storage_class",
              "options": [
                {
                  "displayname": "standard",
                  "value": "standard"
                },
                {
                  "displayname": "vault",
                  "value": "vault"
                },
                {
                  "displayname": "cold",
                  "value": "cold"
                },
                {
                  "displayname": "smart",
                  "value": "smart"
                },
                {
                  "displayname": "onerate_active",
                  "value": "onerate_active"
                }
              ]
            },
            {
              "key": "expire_days"
            },
            {
              "key": "expire_filter_prefix"
            },
            {
              "key": "force_delete"
            },
            {
              "key": "bucket_hard_quota"
            },
            {
              "key": "monitoring_crn"
            },
            {
              "key": "enable_platform_metrics",
              "type": "string",
              "default_value": "true",
              "description": "When set to `true`, the IBM Cloud Monitoring instance will be configured to collect platform metrics from the provided region. ⚠️ You can configure 1 instance only of the IBM Cloud Monitoring service per region to collect platform metrics in that location. Check with the account or service administrator if another monitoring instance has already been configured. You may not have permissions to see all monitoring instances in the region. [Learn more](https://cloud.ibm.com/docs/monitoring?topic=monitoring-platform_metrics_enabling).",
              "required": true,
              "virtual": true,
              "options": [
                {
                  "displayname": "true",
                  "value": "true"
                },
                {
                  "displayname": "false",
                  "value": "false"
                }
              ]
            },
            {
              "key": "enable_object_locking"
            },
            {
              "key": "object_lock_duration_days"
            },
            {
              "key": "object_lock_duration_years"
            },
            {
              "key": "enable_object_versioning"
            },
            {
              "key": "enable_retention"
            },
            {
              "key": "enable_permanent_retention"
            },
            {
              "key": "default_retention_days"
            },
            {
              "key": "minimum_retention_days"
            },
            {
              "key": "maximum_retention_days"
            },
            {
              "key": "enable_noncurrent_expire"
            },
            {
              "key": "noncurrent_expire_days"
            },
            {
              "key": "noncurrent_expire_filter_prefix"
            },
            {
              "key": "enable_abort_multipart"
            },
            {
              "key": "abort_multipart_days"
            },
            {
              "key": "abort_multipart_filter_prefix"
            },
            {
              "key": "enable_replication"
            },
            {
              "key": "replication_rule_id"
            },
            {
              "key": "replication_prefix"
            },
            {
              "key": "replication_priority"
            },
            {
              "key": "replication_destination_bucket_name"
            },
            {
              "key": "ibmcloud_kms_api_key"
            },
            {
              "key": "existing_kms_instance_crn"
            },
            {
              "key": "existing_kms_key_crn"
            },
            {
              "key": "cos_key_ring_name"
            },
            {
              "key": "cos_key_name"
            },
            {
              "key": "skip_cos_kms_iam_auth_policy"
            },
            {
              "key": "cos_bucket_cbr_rules",
              "type": "array",
              "custom_config": {
                "type": "textarea",
                "grouping": "deployment",
                "original_grouping": "deployment"
              }
            }
          ],
          "dependencies": [
            {
              "name": "deploy-arch-ibm-cos",
              "description": "Enable to create a Cloud Object Storage (COS) instance, where an object storage bucket can be provisioned.",
              "id": "68921490-2778-4930-ac6d-bae7be6cd958-global",
              "version": "v9.0.2",
              "flavors": [
                "instance"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "cos_instance_crn",
                  "version_input": "existing_cos_instance_crn"
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                }
              ]
            },
            {
              "name": "deploy-arch-ibm-kms",
              "id": "2cad4789-fa90-4886-9c9e-857081c273ee-global",
              "description": "Enable Cloud automation for Key Protect to use your own managed encryption keys. If disabled, IBM Cloud's default service-managed encryption is used.",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "input_mapping": [
                {
                  "dependency_output": "kms_instance_crn",
                  "version_input": "existing_kms_instance_crn"
                },
                {
                  "version_input": "kms_encryption_enabled",
                  "value": true
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                }
              ],
              "optional": true,
              "on_by_default": true,
              "version": "v5.1.4"
            },
            {
              "name": "deploy-arch-ibm-cloud-monitoring",
              "description": "Enable IBM Cloud Monitoring to gain operational visibility into your cloud storage buckets. ",
              "id": "73debdbf-894f-4c14-81c7-5ece3a70b67d-global",
              "version": "v1.2.14",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "cloud_monitoring_crn",
                  "version_input": "monitoring_crn"
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "enable_platform_metrics",
                  "version_input": "enable_platform_metrics",
                  "reference_version": true
                }
              ]
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.10.5"
        },
        {
          "label": "Regional bucket (fully configurable)",
          "name": "regional-bucket-fully-configurable",
          "index": 4,
          "working_directory": "solutions/regional-bucket/fully-configurable",
          "install_type": "fullstack",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "IBM Cloud Framework for Financial Services",
                "profile_version": "1.7.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "cloud-object-storage",
              "notes": "Required to create Cloud Object Storage (COS) Instance."
            },
            {
              "service_name": "kms",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "notes": "[Optional] Required if KMS encryption is enabled and Key protect is used for bucket encryption."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "hs-crypto",
              "notes": "[Optional] Required if KMS encryption is enabled and IBM Hyper Protect Crypto Services is used to encrypt the root key for bucket encryption."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "sysdig-monitor",
              "notes": "[Optional] Required for creating a new instance of cloud monitoring."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "metrics-router",
              "notes": "[Optional] Required if metrics routing to cloud monitoring instance is enabled."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configured to use IBM secure by default standards, but can be edited to fit your use case."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Regional Object Storage Bucket Topology",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-cos/main/reference-architectures/regional-bucket.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture deploys a <b>Regional IBM Cloud Object Storage Bucket</b> across multiple availability zones, with <b>replication</b> ensuring high availability and durability. <br>  Integrated services such as <b>KMS</b> for encryption enhance security, while <b>Activity Tracker Event Routing</b> and <b>Cloud Monitoring</b> offer observability, ensuring resilient and secure cloud storage."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "prefix",
              "required": true
            },
            {
              "key": "region",
              "required": true,
              "options": [
                {
                  "displayname": "Dallas (us-south)",
                  "value": "us-south"
                },
                {
                  "displayname": "Sydney (au-syd)",
                  "value": "au-syd"
                },
                {
                  "displayname": "Sao Paolo (br-sao)",
                  "value": "br-sao"
                },
                {
                  "displayname": "Montreal (ca-mon)",
                  "value": "ca-mon"
                },
                {
                  "displayname": "Toronto (ca-tor)",
                  "value": "ca-tor"
                },
                {
                  "displayname": "Frankfurt (eu-de)",
                  "value": "eu-de"
                },
                {
                  "displayname": "London (eu-gb)",
                  "value": "eu-gb"
                },
                {
                  "displayname": "Madrid (eu-es)",
                  "value": "eu-es"
                },
                {
                  "displayname": "Osaka (jp-osa)",
                  "value": "jp-osa"
                },
                {
                  "displayname": "Tokyo (jp-tok)",
                  "value": "jp-tok"
                },
                {
                  "displayname": "Washington DC (us-east)",
                  "value": "us-east"
                }
              ]
            },
            {
              "key": "existing_cos_instance_crn",
              "required": true
            },
            {
              "key": "bucket_name",
              "required": true
            },
            {
              "key": "provider_visibility",
              "hidden": true,
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                },
                {
                  "displayname": "public-and-private",
                  "value": "public-and-private"
                }
              ]
            },
            {
              "key": "add_bucket_name_suffix"
            },
            {
              "key": "archive_days"
            },
            {
              "key": "archive_filter_prefix"
            },
            {
              "key": "archive_type",
              "options": [
                {
                  "displayname": "Glacier",
                  "value": "Glacier"
                },
                {
                  "displayname": "Accelerated",
                  "value": "Accelerated"
                }
              ]
            },
            {
              "key": "bucket_access_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "bucket_storage_class",
              "options": [
                {
                  "displayname": "standard",
                  "value": "standard"
                },
                {
                  "displayname": "vault",
                  "value": "vault"
                },
                {
                  "displayname": "cold",
                  "value": "cold"
                },
                {
                  "displayname": "smart",
                  "value": "smart"
                },
                {
                  "displayname": "onerate_active",
                  "value": "onerate_active"
                }
              ]
            },
            {
              "key": "expire_days"
            },
            {
              "key": "expire_filter_prefix"
            },
            {
              "key": "force_delete"
            },
            {
              "key": "bucket_hard_quota"
            },
            {
              "key": "management_endpoint_type_for_bucket",
              "hidden": true,
              "options": [
                {
                  "displayname": "direct",
                  "value": "direct"
                },
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                }
              ]
            },
            {
              "key": "monitoring_crn"
            },
                        {
              "key": "enable_platform_metrics",
              "type": "string",
              "default_value": "true",
              "description": "When set to `true`, the IBM Cloud Monitoring instance will be configured to collect platform metrics from the provided region. ⚠️ You can configure 1 instance only of the IBM Cloud Monitoring service per region to collect platform metrics in that location. Check with the account or service administrator if another monitoring instance has already been configured. You may not have permissions to see all monitoring instances in the region. [Learn more](https://cloud.ibm.com/docs/monitoring?topic=monitoring-platform_metrics_enabling).",
              "required": true,
              "virtual": true,
              "options": [
                {
                  "displayname": "true",
                  "value": "true"
                },
                {
                  "displayname": "false",
                  "value": "false"
                }
              ]
            },
            {
              "key": "enable_object_locking"
            },
            {
              "key": "object_lock_duration_days"
            },
            {
              "key": "object_lock_duration_years"
            },
            {
              "key": "enable_object_versioning"
            },
            {
              "key": "enable_retention"
            },
            {
              "key": "enable_permanent_retention"
            },
            {
              "key": "default_retention_days"
            },
            {
              "key": "minimum_retention_days"
            },
            {
              "key": "maximum_retention_days"
            },
            {
              "key": "enable_noncurrent_expire"
            },
            {
              "key": "noncurrent_expire_days"
            },
            {
              "key": "noncurrent_expire_filter_prefix"
            },
            {
              "key": "enable_abort_multipart"
            },
            {
              "key": "abort_multipart_days"
            },
            {
              "key": "abort_multipart_filter_prefix"
            },
            {
              "key": "enable_replication"
            },
            {
              "key": "replication_rule_id"
            },
            {
              "key": "replication_prefix"
            },
            {
              "key": "replication_priority"
            },
            {
              "key": "replication_destination_bucket_name"
            },
            {
              "key": "ibmcloud_kms_api_key"
            },
            {
              "key": "kms_encryption_enabled"
            },
            {
              "key": "existing_kms_instance_crn"
            },
            {
              "key": "existing_kms_key_crn"
            },
            {
              "key": "cos_key_ring_name"
            },
            {
              "key": "cos_key_name"
            },
            {
              "key": "kms_endpoint_type",
              "hidden": true,
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                }
              ]
            },
            {
              "key": "skip_cos_kms_iam_auth_policy"
            },
            {
              "key": "cos_bucket_cbr_rules",
              "type": "array",
              "custom_config": {
                "type": "textarea",
                "grouping": "deployment",
                "original_grouping": "deployment"
              }
            }
          ],
          "dependencies": [
            {
              "name": "deploy-arch-ibm-cos",
              "description": "Enable to create a Cloud Object Storage (COS) instance, where an object storage bucket can be provisioned. ",
              "id": "68921490-2778-4930-ac6d-bae7be6cd958-global",
              "version": "v9.0.2",
              "flavors": [
                "instance"
              ],
              "default_flavor": "instance",
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "cos_instance_crn",
                  "version_input": "existing_cos_instance_crn"
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                }
              ]
            },
            {
              "name": "deploy-arch-ibm-kms",
              "description": "Enable Cloud Automation for Key Protect when you want services to use your own managed encryption keys. If disabled, it will fall back on IBM Cloud's default service-managed encryption. ",
              "id": "2cad4789-fa90-4886-9c9e-857081c273ee-global",
              "version": "v5.1.4",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "kms_instance_crn",
                  "version_input": "existing_kms_instance_crn"
                },
                {
                  "version_input": "kms_encryption_enabled",
                  "value": true
                },
                {
                  "dependency_input": "kms_endpoint_type",
                  "version_input": "kms_endpoint_type",
                  "reference_version": true
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "region",
                  "version_input": "region",
                  "reference_version": true
                }
              ]
            },
            {
              "name": "deploy-arch-ibm-cloud-monitoring",
              "description": "Enable IBM Cloud Monitoring to gain operational visibility into your cloud storage buckets. ",
              "id": "73debdbf-894f-4c14-81c7-5ece3a70b67d-global",
              "version": "v1.2.14",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "cloud_monitoring_crn",
                  "version_input": "monitoring_crn"
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "region",
                  "version_input": "region",
                  "reference_version": true
                }
              ]
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.10.5"
        },
        {
          "label": "Regional bucket (security-enforced)",
          "name": "regional-bucket-security-enforced",
          "index": 5,
          "working_directory": "solutions/regional-bucket/security-enforced",
          "install_type": "fullstack",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "IBM Cloud Framework for Financial Services",
                "profile_version": "1.7.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "cloud-object-storage",
              "notes": "Required to create Cloud Object Storage (COS) Instance."
            },
            {
              "service_name": "kms",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "notes": "[Optional] Required if creating a new Key Protect root key for bucket encryption."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Editor"
              ],
              "service_name": "hs-crypto",
              "notes": "[Optional] Required if creating a new Hyper Protect Crypto Services root key for bucket encryption."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configured to use IBM secure by default standards that can't be changed."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "caption": "Regional Object Storage Bucket Topology",
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-cos/main/reference-architectures/regional-bucket.svg",
                  "type": "image/svg+xml"
                },
                "description": "This architecture deploys a <b>Regional IBM Cloud Object Storage Bucket</b> across multiple availability zones, with <b>replication</b> ensuring high availability and durability. <br>  Integrated services such as <b>KMS</b> for encryption enhance security, while <b>Activity Tracker Event Routing</b> and <b>Cloud Monitoring</b> offer observability, ensuring resilient and secure cloud storage."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key"
            },
            {
              "key": "prefix",
              "required": true
            },
            {
              "key": "region",
              "required": true,
              "options": [
                {
                  "displayname": "Dallas (us-south)",
                  "value": "us-south"
                },
                {
                  "displayname": "Sydney (au-syd)",
                  "value": "au-syd"
                },
                {
                  "displayname": "Sao Paolo (br-sao)",
                  "value": "br-sao"
                },
                {
                  "displayname": "Montreal (ca-mon)",
                  "value": "ca-mon"
                },
                {
                  "displayname": "Toronto (ca-tor)",
                  "value": "ca-tor"
                },
                {
                  "displayname": "Frankfurt (eu-de)",
                  "value": "eu-de"
                },
                {
                  "displayname": "London (eu-gb)",
                  "value": "eu-gb"
                },
                {
                  "displayname": "Madrid (eu-es)",
                  "value": "eu-es"
                },
                {
                  "displayname": "Osaka (jp-osa)",
                  "value": "jp-osa"
                },
                {
                  "displayname": "Tokyo (jp-tok)",
                  "value": "jp-tok"
                },
                {
                  "displayname": "Washington DC (us-east)",
                  "value": "us-east"
                }
              ]
            },
            {
              "key": "existing_cos_instance_crn",
              "required": true
            },
            {
              "key": "bucket_name",
              "required": true
            },
            {
              "key": "add_bucket_name_suffix"
            },
            {
              "key": "archive_days"
            },
            {
              "key": "archive_filter_prefix"
            },
            {
              "key": "archive_type",
              "options": [
                {
                  "displayname": "Glacier",
                  "value": "Glacier"
                },
                {
                  "displayname": "Accelerated",
                  "value": "Accelerated"
                }
              ]
            },
            {
              "key": "bucket_access_tags",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "bucket_storage_class",
              "options": [
                {
                  "displayname": "standard",
                  "value": "standard"
                },
                {
                  "displayname": "vault",
                  "value": "vault"
                },
                {
                  "displayname": "cold",
                  "value": "cold"
                },
                {
                  "displayname": "smart",
                  "value": "smart"
                },
                {
                  "displayname": "onerate_active",
                  "value": "onerate_active"
                }
              ]
            },
            {
              "key": "expire_days"
            },
            {
              "key": "expire_filter_prefix"
            },
            {
              "key": "force_delete"
            },
            {
              "key": "bucket_hard_quota"
            },
            {
              "key": "monitoring_crn"
            },
            {
              "key": "enable_platform_metrics",
              "type": "string",
              "default_value": "true",
              "description": "When set to `true`, the IBM Cloud Monitoring instance will be configured to collect platform metrics from the provided region. ⚠️ You can configure 1 instance only of the IBM Cloud Monitoring service per region to collect platform metrics in that location. Check with the account or service administrator if another monitoring instance has already been configured. You may not have permissions to see all monitoring instances in the region. [Learn more](https://cloud.ibm.com/docs/monitoring?topic=monitoring-platform_metrics_enabling).",
              "required": true,
              "virtual": true,
              "options": [
                {
                  "displayname": "true",
                  "value": "true"
                },
                {
                  "displayname": "false",
                  "value": "false"
                }
              ]
            },
            {
              "key": "enable_object_locking"
            },
            {
              "key": "object_lock_duration_days"
            },
            {
              "key": "object_lock_duration_years"
            },
            {
              "key": "enable_object_versioning"
            },
            {
              "key": "enable_retention"
            },
            {
              "key": "enable_permanent_retention"
            },
            {
              "key": "default_retention_days"
            },
            {
              "key": "minimum_retention_days"
            },
            {
              "key": "maximum_retention_days"
            },
            {
              "key": "enable_noncurrent_expire"
            },
            {
              "key": "noncurrent_expire_days"
            },
            {
              "key": "noncurrent_expire_filter_prefix"
            },
            {
              "key": "enable_abort_multipart"
            },
            {
              "key": "abort_multipart_days"
            },
            {
              "key": "abort_multipart_filter_prefix"
            },
            {
              "key": "enable_replication"
            },
            {
              "key": "replication_rule_id"
            },
            {
              "key": "replication_prefix"
            },
            {
              "key": "replication_priority"
            },
            {
              "key": "replication_destination_bucket_name"
            },
            {
              "key": "ibmcloud_kms_api_key"
            },
            {
              "key": "existing_kms_instance_crn"
            },
            {
              "key": "existing_kms_key_crn"
            },
            {
              "key": "cos_key_ring_name"
            },
            {
              "key": "cos_key_name"
            },
            {
              "key": "skip_cos_kms_iam_auth_policy"
            },
            {
              "key": "cos_bucket_cbr_rules"
            }
          ],
          "dependencies": [
            {
              "name": "deploy-arch-ibm-cos",
              "description": "Enable to create a Cloud Object Storage (COS) instance, where an object storage bucket can be provisioned.",
              "id": "68921490-2778-4930-ac6d-bae7be6cd958-global",
              "version": "v9.0.2",
              "flavors": [
                "instance"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "cos_instance_crn",
                  "version_input": "existing_cos_instance_crn"
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                }
              ]
            },
            {
              "name": "deploy-arch-ibm-kms",
              "id": "2cad4789-fa90-4886-9c9e-857081c273ee-global",
              "description": "Enable Cloud automation for Key Protect to use your own managed encryption keys. If disabled, IBM Cloud's default service-managed encryption is used.",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "input_mapping": [
                {
                  "dependency_output": "kms_instance_crn",
                  "version_input": "existing_kms_instance_crn"
                },
                {
                  "version_input": "kms_encryption_enabled",
                  "value": true
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                }
              ],
              "optional": true,
              "on_by_default": true,
              "version": "v5.1.4"
            },
            {
              "name": "deploy-arch-ibm-cloud-monitoring",
              "description": "Enable IBM Cloud Monitoring to gain operational visibility into your cloud storage buckets. ",
              "id": "73debdbf-894f-4c14-81c7-5ece3a70b67d-global",
              "version": "v1.2.14",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "cloud_monitoring_crn",
                  "version_input": "monitoring_crn"
                },
                {
                  "dependency_input": "prefix",
                  "version_input": "prefix",
                  "reference_version": true
                },
                {
                  "dependency_input": "enable_platform_metrics",
                  "version_input": "enable_platform_metrics",
                  "reference_version": true
                }
              ]
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.10.5"
        }
      ]
    }
  ]
}
